<template>
    <section class="bg-white py-12 px-4 sm:px-6 lg:px-8" dir="rtl">
        <div class="max-w-7xl mx-auto text-center ">
            <h2 class="text-4xl sm:text-5xl lg:text-4xl  text-gray-900 mb-4 mt-10">
                ویژه کسب و کارهایی که خدمات سرویس در محل ارائه می دهند
            </h2>
            <p class="text-sm sm:text-xl lg:text-sm text-gray-600 mb-12 max-w-3xl mx-auto">
                به آسانی درخواست هایی که داری رو در کوتاه ترین زمان به نتیجه برسون
            </p>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="text-center mt-10">
                    <div class="mx-auto mb-4 w-16 h-16 flex items-center justify-center">
                        <span class="text-4xl">
                            <video class="animated-video-icon" muted preload="auto">
                                <source src="/animateicons/fan.mp4" type="video/mp4">
                                مرورگر شما از ویدیو پشتیبانی نمی‌کند.
                            </video>
                        </span>
                    </div>
                    <h2 class="text-2xl  text-gray-900 mb-2">تهویه مطبوع</h2>
                    <a href="#" class="text-gray-400 font-medium hover:underline">
                        ...
                    </a>
                </div>
                <div class="text-center mt-10">
                    <div class="mx-auto mb-4 w-16 h-16 flex items-center justify-center">
                        <span class="text-4xl">
                            <span class="text-4xl">
                                <video class="animated-video-icon" muted preload="auto">
                                    <source src="/animateicons/home-appliance.mp4" type="video/mp4">
                                    مرورگر شما از ویدیو پشتیبانی نمی‌کند.
                                </video>
                            </span>
                        </span>
                    </div>
                    <h2 class="text-2xl  text-gray-900 mb-2">تعمیر لوازم خانگی</h2>
                    <a href="#" class="text-gray-400 font-medium hover:underline">
                        ...
                    </a>
                </div>
                <div class="text-center mt-10">
                    <div class="mx-auto mb-4 w-16 h-16 flex items-center justify-center">
                        <span class="text-4xl">
                            <video class="animated-video-icon" muted preload="auto">
                                <source src="/animateicons/leak.mp4" type="video/mp4">
                                مرورگر شما از ویدیو پشتیبانی نمی‌کند.
                            </video>
                        </span>
                    </div>
                    <h2 class="text-2xl  text-gray-900 mb-2">لوله‌کشی</h2>
                    <a href="#" class="text-gray-400 font-medium hover:underline">
                        ...
                    </a>
                </div>
                <div class="text-center mt-10">
                    <div class="mx-auto mb-4 w-16 h-16 flex items-center justify-center">
                        <span class="text-4xl">
                            <video class="animated-video-icon" muted preload="auto">
                                <source src="/animateicons/socket.mp4" type="video/mp4">
                                مرورگر شما از ویدیو پشتیبانی نمی‌کند.
                            </video>
                        </span>
                    </div>
                    <h2 class="text-2xl  text-gray-900 mb-2">برقکاران</h2>
                    <a href="#" class="text-gray-400 font-medium hover:underline">
                        ...
                    </a>
                </div>
                <div class="text-center mt-10">
                    <div class="mx-auto mb-4 w-16 h-16 flex items-center justify-center">
                        <span class="text-4xl">
                            <video class="animated-video-icon" muted preload="auto">
                                <source src="/animateicons/housekeeping.mp4" type="video/mp4">
                                مرورگر شما از ویدیو پشتیبانی نمی‌کند.
                            </video>
                        </span>
                    </div>
                    <h2 class="text-2xl  text-gray-900 mb-2">ساختمان</h2>
                    <a href="#" class="text-gray-400 font-medium hover:underline">
                        ...
                    </a>
                </div>
                <div class="text-center mt-10">
                    <div class="mx-auto mb-4 w-16 h-16 flex items-center justify-center">
                        <span class="text-4xl">
                            <video class="animated-video-icon" muted preload="auto">
                                <source src="/animateicons/lift.mp4" type="video/mp4">
                                مرورگر شما از ویدیو پشتیبانی نمی‌کند.
                            </video>
                        </span>
                    </div>
                    <h2 class="text-2xl  text-gray-900 mb-2">آسانسور</h2>
                    <a href="#" class="text-gray-400 font-medium hover:underline">
                        ...
                    </a>
                </div>
                <div class="text-center mt-10">
                    <div class="mx-auto mb-4 w-16 h-16 flex items-center justify-center">
                        <span class="text-4xl">
                            <video class="animated-video-icon" muted preload="auto">
                                <source src="/animateicons/cat-playing.mp4" type="video/mp4">
                                مرورگر شما از ویدیو پشتیبانی نمی‌کند.
                            </video>

                        </span>
                    </div>
                    <h2 class="text-2xl  text-gray-900 mb-2">حیوانات خانگی</h2>
                    <a href="#" class="text-gray-400 font-medium hover:underline">
                        ...
                    </a>
                </div>
                <div class="text-center mt-10">
                    <div class="mx-auto mb-4 w-16 h-16 flex items-center justify-center">
                        <span class="text-4xl">
                            <video class="animated-video-icon" muted preload="auto">
                                <source src="/animateicons/technology.mp4" type="video/mp4">
                                مرورگر شما از ویدیو پشتیبانی نمی‌کند.
                            </video>

                        </span>
                    </div>
                    <h2 class="text-2xl  text-gray-900 mb-2">صنایع دیگر</h2>
                    <a href="#" class="text-gray-400 font-medium hover:underline">
                        ...
                    </a>
                </div>
            </div>
        </div>
    </section>
</template>

<script setup>
import { onMounted } from 'vue'

onMounted(() => {
    const boxes = document.querySelectorAll('.text-center.mt-10')

    boxes.forEach(box => {
        const video = box.querySelector('.animated-video-icon')
        let isHovered = false
        let hasEnded = false

        // وقتی موس روی کل باکس رفت
        box.addEventListener('mouseenter', () => {
            isHovered = true
            if (video.paused || hasEnded) {
                video.currentTime = 0
                video.play()
                hasEnded = false
            }
        })

        // وقتی موس از کل باکس خارج شد
        box.addEventListener('mouseleave', () => {
            isHovered = false
        })

        // وقتی ویدیو تموم شد
        video.addEventListener('ended', () => {
            hasEnded = true
            if (isHovered) {
                video.currentTime = 0
                video.play()
                hasEnded = false
            }
        })
    })
})
</script>


<style>
.animated-video-icon {
    width: 150px;
    height: 150px;
    cursor: pointer;
}
</style>